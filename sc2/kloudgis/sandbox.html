<html>
  <head>
	<meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="">
	<meta name="author" content="Kloudgis.org">
	<link rel="shortcut icon" href="favicon.ico">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	
	<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"  />
	<link rel="stylesheet" href="css/sandbox.css" type="text/css" media="screen"  />
	<link rel="stylesheet" href="css/common.css" type="text/css" media="screen"  />
	<link rel="stylesheet" href="ext/leaflet/leaflet.css" type="text/css" media="screen" />
    <title>Kloudgis</title>
	<script type="text/x-handlebars" data-template-name="notes-marker-popup">
		{{#view class="popup-note-title"}}
			{{KG.notesPopupController.popupTitle}}
		{{/view}}
	    {{#collection contentBinding="KG.notesPopupController" tagName="ul" class="popup-note-list"}}
			{{#view KG.NotePopupItemView}}
				{{title}}
			{{/view}}
		{{/collection}}
	</script>
	<script type="text/x-handlebars" data-template-name="active-note-popup">
		{{#view class="active-note-popup"}}		
			{{#view class="note-date-label"}}
				{{KG.activeNoteController.dateValue}}
			{{/view}}
			{{KG.activeNoteController.titleLabel}}
	    	{{#view KG.TextField valueBinding="KG.activeNoteController.titleValue" disabledBinding="KG.activeNoteController.isDisabled" type="text" placeholder_not_loc="_noteTitlePlaceholder" }}
			{{/view}}
			{{KG.activeNoteController.descriptionLabel}}
			{{#view KG.TextArea disabledBinding="KG.activeNoteController.isDisabled" valueBinding="KG.activeNoteController*content.description"}}
			{{/view}}
			{{#view class="active-note-popup-bottom"}}
				{{#view KG.Button isVisibleBinding="KG.activeNoteController.isUpdateVisible" class="white-button" classBinding="isActive" sc_action="confirmNoteAction"}}
					{{KG.activeNoteController.confirmLabel}}
				{{/view}}		
				{{#view KG.Button isVisibleBinding="KG.activeNoteController.isDeleteVisible" class="red-button" classBinding="isActive" sc_action="deleteNoteAction"}}
					{{KG.activeNoteController.deleteLabel}}
				{{/view}}
				{{#view class="note-author-label"}}
					{{KG.activeNoteController.authorValue}}
				{{/view}}
			{{/view}}
		{{/view}}
	</script>
	<script type="text/x-handlebars" data-template-name="info-popup">
		{{#collection contentBinding="KG.infoController"  isVisibleBinding="KG.infoController.listVisible" tagName="ul" class="popup-info-list"}}
			{{#view KG.FeatureInfoPopupItemView class="popup-info-item" ignoreIfFirst="true"}}
					<table class="popup-info-table more-features-zone">
					<tr>
					<td>
						{{itemView.content.title}}			
						</td>
					<td>
						{{#view KG.SelectFeatureButtonView class="popup-info-select" tagName="div" classBinding="isActive"}}	
							<img src="resources/images/right_arrow_32.png"/>		
							{{/view}}
					</td>
					</tr>
					</table>
			{{/view}}		
		{{/collection}}
		<table class="popup-info-master-row-table">
		<tr>
		<td>
		{{#view KG.ExpandButtonView tagName="div" class="popup-info-expand" isVisibleBinding="KG.infoController.multipleFeatures" sclassBinding="isActive" expandedBinding="KG.infoController.listVisible"}}	
			<img {{bindAttr src="logo"}}/>		
		{{/view}}		
		</td>
		<td>
		{{#view KG.FeatureInfoPopupItemView class="popup-info-item" contentBinding="KG.infoController.content.firstObject"}}
			<table class="popup-info-table">
			<tr>
			<td>
				{{content.title}}			
			</td>
			<td>
				{{#view KG.SelectFeatureButtonView class="popup-info-select" contentBinding="KG.infoController.content.firstObject" tagName="div" classBinding="isActive"}}	
					<img src="resources/images/right_arrow_32.png"/>		
				{{/view}}
			</td>
			</tr>
			</table>
		{{/view}}	
		</td>
		</tr>
		</table>	
	</script>
  </head>
  <body>	
	<div id="super-map">
		<div id="map">		
		</div>	
		<div id="back-home" class="kg-controls">
			<a href="home.html"></a>
		</div>	
		<div id="create-note" class="kg-controls">
			<a href="javascript:void(0)" onclick="KG.core_sandbox.createNote()">
			</a>
		</div>
		<div id="active-sandbox-label">	
			<span class="label-ellipsis"></span>
		</div>
		<script type="text/x-handlebars">
			{{#view class="kg-controls" id="position-label"}}
				{{KG.core_sandbox.latitudeLabel}}
				{{KG.core_sandbox.longitudeLabel}}
			{{/view}}
		</script>
	</div>
		<script type="text/x-handlebars">
			{{#view id="side-panel"}}
			{{/view}}
		</script>		
  </body>

<!-- load all of the dependencies --> 
   <script type="text/javascript" src="assets/bpm_libs.js" ></script>
   <script type="text/javascript" src="assets/app_lib.js" ></script> 
   <script type="text/javascript" src="assets/auth_lib.js" ></script>
   <script type="text/javascript" src="assets/core_lib.js" ></script>
   <script type="text/javascript" src="assets/sandbox_lib.js" ></script>
<!-- load my app external lib --> 
   <script type="text/javascript" src="ext/leaflet/leaflet.js" ></script> 
   <script type="text/javascript"> 
	      spade.ready(function() { 
			//bootstrap
	        spade.require('kloudgis/sandbox/lib/main');			
	      }); 
   </script>
	
</html>
